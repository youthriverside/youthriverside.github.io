<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="刘渤源,youthriverside@outlook.com"><title>宝塔面板漏洞 · 负雨杂感</title><meta name="description" content="起因
宝塔面板出现严重数据库漏洞，官方发布紧急安全更新。公告要求所有用户升级到最新版本，但未说明安全事件的任何信息。据了解，此次更新是为了修复phpmyadmin未鉴权，可通过特定地址直接登陆数据库的严重Bug为解决用户服务器被通过phpmyadmin提权导致的安全问题，

为解决用户服务器被通过p"><meta name="keywords" content="随笔,青春,记录,校园,诗歌,情感,相思,技术"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">负雨杂感</a></h3></div></div><ul class="social-links"><li><a href="https://twitter.com/LiuBoyuan10" target="_blank" rel="noopener"><i class="fa fa-twitter"></i></a></li><li><a href="https://liuboyuan.fun/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://facebook.com/boyuan.liu.9678" target="_blank" rel="noopener"><i class="fa fa-facebook"></i></a></li><li><a href="http://github.com/youthriverside" target="_blank" rel="noopener"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"></a><span> </span><a href="https://liuboyuan.fun">©刘渤源</a><br><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener">黑ICP备20000740号</a><br><div class="by_farbox"></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/zhihelinyou">友链</a></li><li><a href="/birenziyun">自言</a></li><li><a href="/archives">归档</a></li><li><a href="/privacy-policy">关于</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>宝塔面板漏洞</a></h3></div><div class="post-content"><h3 id="起因"><a href="https://liuboyuan.fun/btbug/#%E8%B5%B7%E5%9B%A0" title="起因"></a>起因</h3>
<p>宝塔面板出现严重数据库漏洞，官方发布紧急安全更新。公告要求所有用户升级到最新版本，但未说明安全事件的任何信息。据了解，此次更新是为了修复phpmyadmin未鉴权，可通过特定地址直接登陆数据库的严重Bug为解决用户服务器被通过phpmyadmin提权导致的安全问题，</p>
<blockquote>
<p>为解决用户服务器被通过phpmyadmin提权导致的安全问题，<br>
Linux面板7.4.2/Windows面板6.8.0 版本中加入了phpmyadmin安全访问模块，<br>
原理是通过面板进行访问phpmyadmin，而不是nginx/apache，<br>
但因在目录存放时存在一个致命逻辑漏洞，导致nginx/apache也可以访问到专门给面板使用的phpmyadmin目录，在做安全审计时将重心放在面板程序中，忽略了除面板外被访问的可能，从而导致了此事件的发生.</p>
</blockquote>
<p>我这辈子就没见过这么大的漏洞，数据库都能干没喽<br>
估计宝塔要把程序员祭天了。</p>
<h3 id="详情"><a href="https://liuboyuan.fun/btbug/#%E8%AF%A6%E6%83%85" title="详情"></a>详情</h3>
<p>据了解，该漏洞可以直接通过</p>
<p>1</p>
<p>ip:888/pma</p>
<p>来进入phpmyadmin，目前已经有很多个人网站以及政府网站受到打击，且都是在7.4.2版本。<br>
目前有部分受打击IP如下所示：</p>
<p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12<br>
13<br>
14<br>
15<br>
16</p>
<p><a href="http://47.114.96.59:888/pma" target="_blank" rel="noopener">http://47.114.96.59:888/pma</a><br>
<a href="http://47.114.98.101:888/pma" target="_blank" rel="noopener">http://47.114.98.101:888/pma</a><br>
<a href="http://47.114.98.215:888/pma" target="_blank" rel="noopener">http://47.114.98.215:888/pma</a><br>
<a href="http://47.114.102.153:888/pma" target="_blank" rel="noopener">http://47.114.102.153:888/pma</a><br>
<a href="http://47.114.104.61:888/pma" target="_blank" rel="noopener">http://47.114.104.61:888/pma</a><br>
<a href="http://47.114.104.82:888/pma" target="_blank" rel="noopener">http://47.114.104.82:888/pma</a><br>
<a href="http://47.114.105.229:888/pma" target="_blank" rel="noopener">http://47.114.105.229:888/pma</a><br>
<a href="http://47.114.106.82:888/pma" target="_blank" rel="noopener">http://47.114.106.82:888/pma</a><br>
<a href="http://47.114.107.70:888/pma" target="_blank" rel="noopener">http://47.114.107.70:888/pma</a><br>
<a href="http://47.114.107.74:888/pma" target="_blank" rel="noopener">http://47.114.107.74:888/pma</a><br>
<a href="http://47.114.108.111:888/pma" target="_blank" rel="noopener">http://47.114.108.111:888/pma</a><br>
<a href="http://47.114.109.13:888/pma" target="_blank" rel="noopener">http://47.114.109.13:888/pma</a><br>
<a href="http://47.114.109.200:888/pma" target="_blank" rel="noopener">http://47.114.109.200:888/pma</a><br>
<a href="http://47.114.109.240:888/pma" target="_blank" rel="noopener">http://47.114.109.240:888/pma</a><br>
<a href="http://47.114.112.168:888/pma" target="_blank" rel="noopener">http://47.114.112.168:888/pma</a><br>
<a href="http://47.114.113.178:888/pma" target="_blank" rel="noopener">http://47.114.113.178:888/pma</a></p>
<h3 id="原理"><a href="https://liuboyuan.fun/btbug/#%E5%8E%9F%E7%90%86" title="原理"></a>原理</h3>
<p><img src="http://liuboyuan.fun/pics/400.jpg" alt="漏洞原理"></p>
<p>如图为该漏洞原理</p>
<h3 id="防范与应用"><a href="https://liuboyuan.fun/btbug/#%E9%98%B2%E8%8C%83%E4%B8%8E%E5%BA%94%E7%94%A8" title="防范与应用"></a>防范与应用</h3>
<h5 id="防范"><a href="https://liuboyuan.fun/btbug/#%E9%98%B2%E8%8C%83" title="防范"></a>防范</h5>
<ul>
<li>更新宝塔面板</li>
<li>关闭888端口</li>
<li>有严格的安全认证</li>
<li>卸载数据库和phpmyadmin</li>
<li>使用别的面板</li>
</ul>
<h5 id="应用"><a href="https://liuboyuan.fun/btbug/#%E5%BA%94%E7%94%A8" title="应用"></a>应用</h5>
<p><img src="http://liuboyuan.fun/pics/btbug1.jpg" alt=""></p>
<p>请大家尽量不要尝试，否则警察局见。</p>
<h3 id="警醒"><a href="https://liuboyuan.fun/btbug/#%E8%AD%A6%E9%86%92" title="警醒"></a>警醒</h3>
<p>这次事故再次印证了那句话</p>
<blockquote>
<p>没有绝对安全的系统</p>
</blockquote>
<p>我们在以后的路上要养成勤备份、护安全的良好习惯，不能过度相信面板。要尝试多种安全防护方式，启用端口限制功能。才能在下一次浩劫中得以存活。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-08-25</span><i class="fa fa-comment-o"></i><a href="/e5-ae-9d-e5-a1-94-e9-9d-a2-e6-9d-bf-e6-bc-8f-e6-b4-9e/#comments">评论</a><i class="fa fa-tag"></i><a class="tag" href="/categories/未分类/" title="未分类">未分类 </a><a class="tag" href="/tags/Wordpress/" title="Wordpress">Wordpress </a><a class="tag" href="/tags/日志/" title="日志">日志 </a><a class="tag" href="/tags/计算机/" title="计算机">计算机 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://liuboyuan.fun/e5-ae-9d-e5-a1-94-e9-9d-a2-e6-9d-bf-e6-bc-8f-e6-b4-9e/,负雨杂感,宝塔面板漏洞,;" target="_blank" rel="noopener"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/e5-85-ac-e5-91-8a/" title="公告">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/e6-99-a8-e4-b8-b4-e9-87-91-e5-b1-b1/" title="晨临金山">下一篇</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'misthrain';
var disqus_identifier = 'e5-ae-9d-e5-a1-94-e9-9d-a2-e6-9d-bf-e6-bc-8f-e6-b4-9e/';
var disqus_title = '宝塔面板漏洞';
var disqus_url = 'https://liuboyuan.fun/e5-ae-9d-e5-a1-94-e9-9d-a2-e6-9d-bf-e6-bc-8f-e6-b4-9e/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>